{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Location = void 0;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Location = /*#__PURE__*/function () {\n  function Location(route, state) {\n    _classCallCheck(this, Location);\n\n    _defineProperty(this, \"route\", void 0);\n\n    _defineProperty(this, \"state\", void 0);\n\n    this.route = route;\n    this.state = state;\n  }\n  /**\n   * @ignore\n   * @param viewId\n   */\n\n\n  _createClass(Location, [{\n    key: \"getLastPanelInView\",\n    value: function getLastPanelInView(viewId) {\n      var state = this.state;\n\n      if (state && state.panelInView[viewId]) {\n        return state.panelInView[viewId];\n      }\n\n      return undefined;\n    }\n    /**\n     * Массив из id панелей для передачи в атрибут history <View>\n     *\n     * ```javascript\n     * import { useLocation } from '@happysanta/router';\n     *\n     * const App = () => {\n     *    const location = useLocation();\n     *    return <View id={VIEW_MAIN}\n     *                 history={location.getViewHistory(VIEW_MAIN)}\n     *                 activePanel={location.getViewActivePanel(VIEW_MAIN)}>\n     *           <Home id={PANEL_MAIN}/>\n     *           <Persik id={PANEL_PERSIK}/>\n     *    </View>\n     * }\n     * ```\n     *\n     * @param viewId\n     */\n\n  }, {\n    key: \"getViewHistory\",\n    value: function getViewHistory(viewId) {\n      var route = this.route;\n      var state = this.state;\n\n      if (route.getViewId() === viewId) {\n        return state.history;\n      } else {\n        var lastPanelId = this.getViewActivePanel(viewId);\n\n        if (lastPanelId) {\n          return [lastPanelId];\n        }\n\n        return [];\n      }\n    }\n  }, {\n    key: \"getViewHistoryWithLastPanel\",\n    value: function getViewHistoryWithLastPanel(viewId) {\n      var history = this.getViewHistory(viewId);\n      var lastPanel = this.getLastPanelInView(viewId);\n\n      if (lastPanel && !history.includes(lastPanel)) {\n        return history.concat([lastPanel]);\n      } else {\n        return history;\n      }\n    }\n    /**\n     * @deprecated use getViewActivePanel\n     * @ignore\n     * @param viewId\n     */\n\n  }, {\n    key: \"getPanelIdInView\",\n    value: function getPanelIdInView(viewId) {\n      return this.getViewActivePanel(viewId);\n    }\n  }, {\n    key: \"getViewActivePanel\",\n    value: function getViewActivePanel(viewId) {\n      var route = this.route;\n\n      if (route.getViewId() === viewId) {\n        return route.getPanelId();\n      } else {\n        return this.getLastPanelInView(viewId);\n      }\n    }\n  }, {\n    key: \"getPanelId\",\n    value: function getPanelId() {\n      return this.route.getPanelId();\n    }\n  }, {\n    key: \"getViewId\",\n    value: function getViewId() {\n      return this.route.getViewId();\n    }\n  }, {\n    key: \"getRootId\",\n    value: function getRootId() {\n      return this.route.getRootId();\n    }\n  }, {\n    key: \"getModalId\",\n    value: function getModalId() {\n      return this.route.getModalId();\n    }\n  }, {\n    key: \"getPopupId\",\n    value: function getPopupId() {\n      return this.route.getPopupId();\n    }\n  }, {\n    key: \"getPageId\",\n    value: function getPageId() {\n      return this.route.getPageId();\n    }\n  }, {\n    key: \"getParams\",\n    value: function getParams() {\n      return this.route.getParams();\n    }\n  }, {\n    key: \"hasOverlay\",\n    value: function hasOverlay() {\n      return this.route.hasOverlay();\n    }\n    /**\n     * Если вам надо отрисовать стрелочку назад или домик то используйте эту функцию\n     */\n\n  }, {\n    key: \"isFirstPage\",\n    value: function isFirstPage() {\n      return this.state.first === 1;\n    }\n  }]);\n\n  return Location;\n}();\n\nexports.Location = Location;","map":{"version":3,"names":["Object","defineProperty","exports","value","Location","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","route","state","getLastPanelInView","viewId","panelInView","undefined","getViewHistory","getViewId","history","lastPanelId","getViewActivePanel","getViewHistoryWithLastPanel","lastPanel","includes","concat","getPanelIdInView","getPanelId","getRootId","getModalId","getPopupId","getPageId","getParams","hasOverlay","isFirstPage","first"],"sources":["/home/oleg/miniAppsVk/node_modules/@happysanta/router/dist/lib/entities/Location.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Location = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar Location = /*#__PURE__*/function () {\n  function Location(route, state) {\n    _classCallCheck(this, Location);\n\n    _defineProperty(this, \"route\", void 0);\n\n    _defineProperty(this, \"state\", void 0);\n\n    this.route = route;\n    this.state = state;\n  }\n  /**\n   * @ignore\n   * @param viewId\n   */\n\n\n  _createClass(Location, [{\n    key: \"getLastPanelInView\",\n    value: function getLastPanelInView(viewId) {\n      var state = this.state;\n\n      if (state && state.panelInView[viewId]) {\n        return state.panelInView[viewId];\n      }\n\n      return undefined;\n    }\n    /**\n     * Массив из id панелей для передачи в атрибут history <View>\n     *\n     * ```javascript\n     * import { useLocation } from '@happysanta/router';\n     *\n     * const App = () => {\n     *    const location = useLocation();\n     *    return <View id={VIEW_MAIN}\n     *                 history={location.getViewHistory(VIEW_MAIN)}\n     *                 activePanel={location.getViewActivePanel(VIEW_MAIN)}>\n     *           <Home id={PANEL_MAIN}/>\n     *           <Persik id={PANEL_PERSIK}/>\n     *    </View>\n     * }\n     * ```\n     *\n     * @param viewId\n     */\n\n  }, {\n    key: \"getViewHistory\",\n    value: function getViewHistory(viewId) {\n      var route = this.route;\n      var state = this.state;\n\n      if (route.getViewId() === viewId) {\n        return state.history;\n      } else {\n        var lastPanelId = this.getViewActivePanel(viewId);\n\n        if (lastPanelId) {\n          return [lastPanelId];\n        }\n\n        return [];\n      }\n    }\n  }, {\n    key: \"getViewHistoryWithLastPanel\",\n    value: function getViewHistoryWithLastPanel(viewId) {\n      var history = this.getViewHistory(viewId);\n      var lastPanel = this.getLastPanelInView(viewId);\n\n      if (lastPanel && !history.includes(lastPanel)) {\n        return history.concat([lastPanel]);\n      } else {\n        return history;\n      }\n    }\n    /**\n     * @deprecated use getViewActivePanel\n     * @ignore\n     * @param viewId\n     */\n\n  }, {\n    key: \"getPanelIdInView\",\n    value: function getPanelIdInView(viewId) {\n      return this.getViewActivePanel(viewId);\n    }\n  }, {\n    key: \"getViewActivePanel\",\n    value: function getViewActivePanel(viewId) {\n      var route = this.route;\n\n      if (route.getViewId() === viewId) {\n        return route.getPanelId();\n      } else {\n        return this.getLastPanelInView(viewId);\n      }\n    }\n  }, {\n    key: \"getPanelId\",\n    value: function getPanelId() {\n      return this.route.getPanelId();\n    }\n  }, {\n    key: \"getViewId\",\n    value: function getViewId() {\n      return this.route.getViewId();\n    }\n  }, {\n    key: \"getRootId\",\n    value: function getRootId() {\n      return this.route.getRootId();\n    }\n  }, {\n    key: \"getModalId\",\n    value: function getModalId() {\n      return this.route.getModalId();\n    }\n  }, {\n    key: \"getPopupId\",\n    value: function getPopupId() {\n      return this.route.getPopupId();\n    }\n  }, {\n    key: \"getPageId\",\n    value: function getPageId() {\n      return this.route.getPageId();\n    }\n  }, {\n    key: \"getParams\",\n    value: function getParams() {\n      return this.route.getParams();\n    }\n  }, {\n    key: \"hasOverlay\",\n    value: function hasOverlay() {\n      return this.route.hasOverlay();\n    }\n    /**\n     * Если вам надо отрисовать стрелочку назад или домик то используйте эту функцию\n     */\n\n  }, {\n    key: \"isFirstPage\",\n    value: function isFirstPage() {\n      return this.state.first === 1;\n    }\n  }]);\n\n  return Location;\n}();\n\nexports.Location = Location;"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAC3CC,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,QAAR,GAAmB,KAAK,CAAxB;;AAEA,SAASC,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;EAAE,IAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;IAAE,MAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;EAA2D;AAAE;;AAEzJ,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;EAAE,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;IAAE,IAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;IAA2BE,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;IAAwDD,UAAU,CAACE,YAAX,GAA0B,IAA1B;IAAgC,IAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;IAA4BjB,MAAM,CAACC,cAAP,CAAsBS,MAAtB,EAA8BI,UAAU,CAACI,GAAzC,EAA8CJ,UAA9C;EAA4D;AAAE;;AAE7T,SAASK,YAAT,CAAsBZ,WAAtB,EAAmCa,UAAnC,EAA+CC,WAA/C,EAA4D;EAAE,IAAID,UAAJ,EAAgBX,iBAAiB,CAACF,WAAW,CAACe,SAAb,EAAwBF,UAAxB,CAAjB;EAAsD,IAAIC,WAAJ,EAAiBZ,iBAAiB,CAACF,WAAD,EAAcc,WAAd,CAAjB;EAA6C,OAAOd,WAAP;AAAqB;;AAEvN,SAASgB,eAAT,CAAyBC,GAAzB,EAA8BN,GAA9B,EAAmCf,KAAnC,EAA0C;EAAE,IAAIe,GAAG,IAAIM,GAAX,EAAgB;IAAExB,MAAM,CAACC,cAAP,CAAsBuB,GAAtB,EAA2BN,GAA3B,EAAgC;MAAEf,KAAK,EAAEA,KAAT;MAAgBY,UAAU,EAAE,IAA5B;MAAkCC,YAAY,EAAE,IAAhD;MAAsDC,QAAQ,EAAE;IAAhE,CAAhC;EAA0G,CAA5H,MAAkI;IAAEO,GAAG,CAACN,GAAD,CAAH,GAAWf,KAAX;EAAmB;;EAAC,OAAOqB,GAAP;AAAa;;AAEjN,IAAIpB,QAAQ,GAAG,aAAa,YAAY;EACtC,SAASA,QAAT,CAAkBqB,KAAlB,EAAyBC,KAAzB,EAAgC;IAC9BrB,eAAe,CAAC,IAAD,EAAOD,QAAP,CAAf;;IAEAmB,eAAe,CAAC,IAAD,EAAO,OAAP,EAAgB,KAAK,CAArB,CAAf;;IAEAA,eAAe,CAAC,IAAD,EAAO,OAAP,EAAgB,KAAK,CAArB,CAAf;;IAEA,KAAKE,KAAL,GAAaA,KAAb;IACA,KAAKC,KAAL,GAAaA,KAAb;EACD;EACD;AACF;AACA;AACA;;;EAGEP,YAAY,CAACf,QAAD,EAAW,CAAC;IACtBc,GAAG,EAAE,oBADiB;IAEtBf,KAAK,EAAE,SAASwB,kBAAT,CAA4BC,MAA5B,EAAoC;MACzC,IAAIF,KAAK,GAAG,KAAKA,KAAjB;;MAEA,IAAIA,KAAK,IAAIA,KAAK,CAACG,WAAN,CAAkBD,MAAlB,CAAb,EAAwC;QACtC,OAAOF,KAAK,CAACG,WAAN,CAAkBD,MAAlB,CAAP;MACD;;MAED,OAAOE,SAAP;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EA7B0B,CAAD,EA+BpB;IACDZ,GAAG,EAAE,gBADJ;IAEDf,KAAK,EAAE,SAAS4B,cAAT,CAAwBH,MAAxB,EAAgC;MACrC,IAAIH,KAAK,GAAG,KAAKA,KAAjB;MACA,IAAIC,KAAK,GAAG,KAAKA,KAAjB;;MAEA,IAAID,KAAK,CAACO,SAAN,OAAsBJ,MAA1B,EAAkC;QAChC,OAAOF,KAAK,CAACO,OAAb;MACD,CAFD,MAEO;QACL,IAAIC,WAAW,GAAG,KAAKC,kBAAL,CAAwBP,MAAxB,CAAlB;;QAEA,IAAIM,WAAJ,EAAiB;UACf,OAAO,CAACA,WAAD,CAAP;QACD;;QAED,OAAO,EAAP;MACD;IACF;EAjBA,CA/BoB,EAiDpB;IACDhB,GAAG,EAAE,6BADJ;IAEDf,KAAK,EAAE,SAASiC,2BAAT,CAAqCR,MAArC,EAA6C;MAClD,IAAIK,OAAO,GAAG,KAAKF,cAAL,CAAoBH,MAApB,CAAd;MACA,IAAIS,SAAS,GAAG,KAAKV,kBAAL,CAAwBC,MAAxB,CAAhB;;MAEA,IAAIS,SAAS,IAAI,CAACJ,OAAO,CAACK,QAAR,CAAiBD,SAAjB,CAAlB,EAA+C;QAC7C,OAAOJ,OAAO,CAACM,MAAR,CAAe,CAACF,SAAD,CAAf,CAAP;MACD,CAFD,MAEO;QACL,OAAOJ,OAAP;MACD;IACF;IACD;AACJ;AACA;AACA;AACA;;EAhBK,CAjDoB,EAmEpB;IACDf,GAAG,EAAE,kBADJ;IAEDf,KAAK,EAAE,SAASqC,gBAAT,CAA0BZ,MAA1B,EAAkC;MACvC,OAAO,KAAKO,kBAAL,CAAwBP,MAAxB,CAAP;IACD;EAJA,CAnEoB,EAwEpB;IACDV,GAAG,EAAE,oBADJ;IAEDf,KAAK,EAAE,SAASgC,kBAAT,CAA4BP,MAA5B,EAAoC;MACzC,IAAIH,KAAK,GAAG,KAAKA,KAAjB;;MAEA,IAAIA,KAAK,CAACO,SAAN,OAAsBJ,MAA1B,EAAkC;QAChC,OAAOH,KAAK,CAACgB,UAAN,EAAP;MACD,CAFD,MAEO;QACL,OAAO,KAAKd,kBAAL,CAAwBC,MAAxB,CAAP;MACD;IACF;EAVA,CAxEoB,EAmFpB;IACDV,GAAG,EAAE,YADJ;IAEDf,KAAK,EAAE,SAASsC,UAAT,GAAsB;MAC3B,OAAO,KAAKhB,KAAL,CAAWgB,UAAX,EAAP;IACD;EAJA,CAnFoB,EAwFpB;IACDvB,GAAG,EAAE,WADJ;IAEDf,KAAK,EAAE,SAAS6B,SAAT,GAAqB;MAC1B,OAAO,KAAKP,KAAL,CAAWO,SAAX,EAAP;IACD;EAJA,CAxFoB,EA6FpB;IACDd,GAAG,EAAE,WADJ;IAEDf,KAAK,EAAE,SAASuC,SAAT,GAAqB;MAC1B,OAAO,KAAKjB,KAAL,CAAWiB,SAAX,EAAP;IACD;EAJA,CA7FoB,EAkGpB;IACDxB,GAAG,EAAE,YADJ;IAEDf,KAAK,EAAE,SAASwC,UAAT,GAAsB;MAC3B,OAAO,KAAKlB,KAAL,CAAWkB,UAAX,EAAP;IACD;EAJA,CAlGoB,EAuGpB;IACDzB,GAAG,EAAE,YADJ;IAEDf,KAAK,EAAE,SAASyC,UAAT,GAAsB;MAC3B,OAAO,KAAKnB,KAAL,CAAWmB,UAAX,EAAP;IACD;EAJA,CAvGoB,EA4GpB;IACD1B,GAAG,EAAE,WADJ;IAEDf,KAAK,EAAE,SAAS0C,SAAT,GAAqB;MAC1B,OAAO,KAAKpB,KAAL,CAAWoB,SAAX,EAAP;IACD;EAJA,CA5GoB,EAiHpB;IACD3B,GAAG,EAAE,WADJ;IAEDf,KAAK,EAAE,SAAS2C,SAAT,GAAqB;MAC1B,OAAO,KAAKrB,KAAL,CAAWqB,SAAX,EAAP;IACD;EAJA,CAjHoB,EAsHpB;IACD5B,GAAG,EAAE,YADJ;IAEDf,KAAK,EAAE,SAAS4C,UAAT,GAAsB;MAC3B,OAAO,KAAKtB,KAAL,CAAWsB,UAAX,EAAP;IACD;IACD;AACJ;AACA;;EAPK,CAtHoB,EA+HpB;IACD7B,GAAG,EAAE,aADJ;IAEDf,KAAK,EAAE,SAAS6C,WAAT,GAAuB;MAC5B,OAAO,KAAKtB,KAAL,CAAWuB,KAAX,KAAqB,CAA5B;IACD;EAJA,CA/HoB,CAAX,CAAZ;;EAsIA,OAAO7C,QAAP;AACD,CAxJ2B,EAA5B;;AA0JAF,OAAO,CAACE,QAAR,GAAmBA,QAAnB"},"metadata":{},"sourceType":"script"}