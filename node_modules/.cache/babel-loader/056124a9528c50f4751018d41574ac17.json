{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.startGlobalRouter = startGlobalRouter;\nexports.getGlobalRouter = getGlobalRouter;\nexports.setGlobalRouter = setGlobalRouter;\nexports.dangerousResetGlobalRouterUseForTestOnly = dangerousResetGlobalRouterUseForTestOnly;\nexports.pushPage = pushPage;\nexports.replacePage = replacePage;\nexports.popPage = popPage;\nexports.pushModal = pushModal;\nexports.pushPopup = pushPopup;\nexports.replaceModal = replaceModal;\nexports.replacePopout = replacePopout;\nexports.popPageTo = popPageTo;\nexports.popPageIfModalOrPopup = popPageIfModalOrPopup;\nexports.popPageIfHasOverlay = popPageIfHasOverlay;\nexports.pushPageAfterPreviews = pushPageAfterPreviews;\nexports.getCurrentRouterState = getCurrentRouterState;\nexports.getCurrentStateOrDef = getCurrentStateOrDef;\nexports.getCurrentRoute = getCurrentRoute;\nexports.getCurrentRouteOrDef = getCurrentRouteOrDef;\nexports.isInfinityPanel = isInfinityPanel;\nexports.getInfinityPanelId = getInfinityPanelId;\n\nvar _Router = require(\"./entities/Router\");\n\nvar _State = require(\"./entities/State\");\n/**\n * Эти функции будут работать после вызова {@link setGlobalRouter}\n * @packageDocumentation\n */\n\n\nvar globalRouter = null;\n/**\n * @ignore\n * @param routes\n * @param config\n */\n\nfunction startGlobalRouter(routes) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (globalRouter) {\n    throw new Error('startGlobalRouter called twice is not allowed');\n  }\n\n  globalRouter = new _Router.Router(routes, config);\n  globalRouter.start();\n  return globalRouter;\n}\n\nfunction getGlobalRouter() {\n  if (!globalRouter) {\n    throw new Error('getGlobalRouter called before startGlobalRouter');\n  }\n\n  return globalRouter;\n}\n\nfunction setGlobalRouter(router) {\n  globalRouter = router;\n}\n/**\n * @ignore\n */\n\n\nfunction dangerousResetGlobalRouterUseForTestOnly() {\n  if (globalRouter) {\n    globalRouter.stop();\n    window.history.pushState(null, '', '');\n  }\n\n  if (window.history.state) {\n    window.history.pushState(null, '', '');\n  }\n\n  (0, _State.__testResetHistoryUniqueId)();\n  globalRouter = null;\n}\n\nfunction pushPage(pageId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().pushPage(pageId, params);\n}\n\nfunction replacePage(pageId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().replacePage(pageId, params);\n}\n\nfunction popPage() {\n  return getGlobalRouter().popPage();\n}\n\nfunction pushModal(modalId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().pushModal(modalId, params);\n}\n\nfunction pushPopup(popupId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().pushPopup(popupId, params);\n}\n\nfunction replaceModal(modalId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().replaceModal(modalId, params);\n}\n\nfunction replacePopout(popupId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().replacePopup(popupId, params);\n}\n\nfunction popPageTo(x) {\n  return getGlobalRouter().popPageTo(x);\n}\n/**\n * @deprecated use popPageIfHasOverlay\n */\n\n\nfunction popPageIfModalOrPopup() {\n  return getGlobalRouter().popPageIfModalOrPopup();\n}\n\nfunction popPageIfHasOverlay() {\n  return getGlobalRouter().popPageIfHasOverlay();\n}\n\nfunction pushPageAfterPreviews(prevPageId, pageId) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return getGlobalRouter().pushPageAfterPreviews(prevPageId, pageId, params);\n}\n/**\n * @deprecated getCurrentStateOrDef\n * @ignore\n */\n\n\nfunction getCurrentRouterState() {\n  return getCurrentStateOrDef();\n}\n\nfunction getCurrentStateOrDef() {\n  return getGlobalRouter().getCurrentStateOrDef();\n}\n/**\n * @deprecated getCurrentRouteOrDef\n * @ignore\n */\n\n\nfunction getCurrentRoute() {\n  return getCurrentRouteOrDef();\n}\n\nfunction getCurrentRouteOrDef() {\n  return getGlobalRouter().getCurrentRouteOrDef();\n}\n\nfunction isInfinityPanel(panelId) {\n  // see Route.getPanelId\n  return !!panelId && panelId.startsWith('_');\n}\n\nfunction getInfinityPanelId(panelId) {\n  // see Route.getPanelId\n  return (panelId.split('..').shift() || '').replace('_', '');\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","startGlobalRouter","getGlobalRouter","setGlobalRouter","dangerousResetGlobalRouterUseForTestOnly","pushPage","replacePage","popPage","pushModal","pushPopup","replaceModal","replacePopout","popPageTo","popPageIfModalOrPopup","popPageIfHasOverlay","pushPageAfterPreviews","getCurrentRouterState","getCurrentStateOrDef","getCurrentRoute","getCurrentRouteOrDef","isInfinityPanel","getInfinityPanelId","_Router","require","_State","globalRouter","routes","config","arguments","length","undefined","Error","Router","start","router","stop","window","history","pushState","state","__testResetHistoryUniqueId","pageId","params","modalId","popupId","replacePopup","x","prevPageId","panelId","startsWith","split","shift","replace"],"sources":["/home/oleg/miniAppsVk/node_modules/@happysanta/router/dist/lib/methods.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.startGlobalRouter = startGlobalRouter;\nexports.getGlobalRouter = getGlobalRouter;\nexports.setGlobalRouter = setGlobalRouter;\nexports.dangerousResetGlobalRouterUseForTestOnly = dangerousResetGlobalRouterUseForTestOnly;\nexports.pushPage = pushPage;\nexports.replacePage = replacePage;\nexports.popPage = popPage;\nexports.pushModal = pushModal;\nexports.pushPopup = pushPopup;\nexports.replaceModal = replaceModal;\nexports.replacePopout = replacePopout;\nexports.popPageTo = popPageTo;\nexports.popPageIfModalOrPopup = popPageIfModalOrPopup;\nexports.popPageIfHasOverlay = popPageIfHasOverlay;\nexports.pushPageAfterPreviews = pushPageAfterPreviews;\nexports.getCurrentRouterState = getCurrentRouterState;\nexports.getCurrentStateOrDef = getCurrentStateOrDef;\nexports.getCurrentRoute = getCurrentRoute;\nexports.getCurrentRouteOrDef = getCurrentRouteOrDef;\nexports.isInfinityPanel = isInfinityPanel;\nexports.getInfinityPanelId = getInfinityPanelId;\n\nvar _Router = require(\"./entities/Router\");\n\nvar _State = require(\"./entities/State\");\n\n/**\n * Эти функции будут работать после вызова {@link setGlobalRouter}\n * @packageDocumentation\n */\nvar globalRouter = null;\n/**\n * @ignore\n * @param routes\n * @param config\n */\n\nfunction startGlobalRouter(routes) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (globalRouter) {\n    throw new Error('startGlobalRouter called twice is not allowed');\n  }\n\n  globalRouter = new _Router.Router(routes, config);\n  globalRouter.start();\n  return globalRouter;\n}\n\nfunction getGlobalRouter() {\n  if (!globalRouter) {\n    throw new Error('getGlobalRouter called before startGlobalRouter');\n  }\n\n  return globalRouter;\n}\n\nfunction setGlobalRouter(router) {\n  globalRouter = router;\n}\n/**\n * @ignore\n */\n\n\nfunction dangerousResetGlobalRouterUseForTestOnly() {\n  if (globalRouter) {\n    globalRouter.stop();\n    window.history.pushState(null, '', '');\n  }\n\n  if (window.history.state) {\n    window.history.pushState(null, '', '');\n  }\n\n  (0, _State.__testResetHistoryUniqueId)();\n  globalRouter = null;\n}\n\nfunction pushPage(pageId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().pushPage(pageId, params);\n}\n\nfunction replacePage(pageId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().replacePage(pageId, params);\n}\n\nfunction popPage() {\n  return getGlobalRouter().popPage();\n}\n\nfunction pushModal(modalId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().pushModal(modalId, params);\n}\n\nfunction pushPopup(popupId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().pushPopup(popupId, params);\n}\n\nfunction replaceModal(modalId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().replaceModal(modalId, params);\n}\n\nfunction replacePopout(popupId) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return getGlobalRouter().replacePopup(popupId, params);\n}\n\nfunction popPageTo(x) {\n  return getGlobalRouter().popPageTo(x);\n}\n/**\n * @deprecated use popPageIfHasOverlay\n */\n\n\nfunction popPageIfModalOrPopup() {\n  return getGlobalRouter().popPageIfModalOrPopup();\n}\n\nfunction popPageIfHasOverlay() {\n  return getGlobalRouter().popPageIfHasOverlay();\n}\n\nfunction pushPageAfterPreviews(prevPageId, pageId) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return getGlobalRouter().pushPageAfterPreviews(prevPageId, pageId, params);\n}\n/**\n * @deprecated getCurrentStateOrDef\n * @ignore\n */\n\n\nfunction getCurrentRouterState() {\n  return getCurrentStateOrDef();\n}\n\nfunction getCurrentStateOrDef() {\n  return getGlobalRouter().getCurrentStateOrDef();\n}\n/**\n * @deprecated getCurrentRouteOrDef\n * @ignore\n */\n\n\nfunction getCurrentRoute() {\n  return getCurrentRouteOrDef();\n}\n\nfunction getCurrentRouteOrDef() {\n  return getGlobalRouter().getCurrentRouteOrDef();\n}\n\nfunction isInfinityPanel(panelId) {\n  // see Route.getPanelId\n  return !!panelId && panelId.startsWith('_');\n}\n\nfunction getInfinityPanelId(panelId) {\n  // see Route.getPanelId\n  return (panelId.split('..').shift() || '').replace('_', '');\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}